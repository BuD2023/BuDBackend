= Getting Started With Spring REST Docs
:toc:

== 채팅 API
=== 1. 채팅방 생성
.request
include::{snippets}/chat-room-controller-test/success-create-chat-room-test/http-request.adoc[]

.response
include::{snippets}/chat-room-controller-test/success-create-chat-room-test/http-response.adoc[]


=== 2. 채팅방 검색
.request
include::{snippets}/chat-room-controller-test/success-search-chat-rooms-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|keyword|String|Y|
|page|Number|N|page값 입력 안할시 0
|size|Number|N|size값 입력 안할시 5
|===

.response
include::{snippets}/chat-room-controller-test/success-search-chat-rooms-test/http-response.adoc[]

.response field
include::{snippets}/chat-room-controller-test/success-search-chat-rooms-test/response-fields.adoc[]


=== 3. 전체 채팅방 읽기
.request
include::{snippets}/chat-room-controller-test/success-read-chat-rooms-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|page|Number|N|page값 입력 안할시 0
|size|Number|N|size값 입력 안할시 5
|===

.response
include::{snippets}/chat-room-controller-test/success-read-chat-rooms-test/http-response.adoc[]

.response field
include::{snippets}/chat-room-controller-test/success-read-chat-rooms-test/response-fields.adoc[]


=== 4. 채팅방 상세 정보
.request
include::{snippets}/chat-room-controller-test/success-read-chat-room-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|chatroomId|Number|Y|path variable
|===

.response
include::{snippets}/chat-room-controller-test/success-read-chat-room-test/http-response.adoc[]

.response field
include::{snippets}/chat-room-controller-test/success-read-chat-room-test/response-fields.adoc[]

.error response
|===
|status|ErrorCode|message
|400|CHATROOM_NOT_FOUND|해당 채팅방 정보가 없습니다.
|===

=== 5. 채팅방 내 채팅 리스트

.request
include::{snippets}/chat-room-controller-test/success-read-chats-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|chatroomId|Number|Y|path variable
|page|Number|Y|query param
|size|Number|N|size값 입력 안할시 10
|===

.response
include::{snippets}/chat-room-controller-test/success-read-chats-test/http-response.adoc[]

.response field
include::{snippets}/chat-room-controller-test/success-read-chats-test/response-fields.adoc[]

.error response
|===
|status|ErrorCode|message
|400|CHATROOM_NOT_FOUND|해당 채팅방 정보가 없습니다.
|===


=== 6. 채팅방 현황
.request
include::{snippets}/chat-room-controller-test/success-chat-rooms-status-test/http-request.adoc[]

.response field
include::{snippets}/chat-room-controller-test/success-chat-rooms-status-test/response-body.adoc[]


=== 7. 웹소켓 sub
.STOMP
----
http://34.64.224.24:8083/ws
/chatrooms/1
Authorization: Bearer accestokenvlaue
----

=== 8. 웹소켓 pub - 메세지
.STOMP
----
http://34.64.224.24:8083/ws
/chats/message
Authorization: Bearer accestokenvlaue

{
    "senderId" : 1,
    "chatroomId" : 1,
    "message" : "hihello!"
}
----
----
{
"chatId": 24,
"chatroomId" : 1,
"message": "안녕이건스톰프메세지!",
"chatType": "MESSAGE",
"createdAt": "0초 전",
"userProfileUrl": null,
"userName": "haden",
"userId": 24
}
----

=== 9. 웹소켓 pub - 이미지
.STOMP
----
http://34.64.224.24:8083/ws
/chats/image
Authorization: Bearer accestokenvlaue

{
    "senderId" : 1,
    "chatroomId" : 1,
    "imageByte" : "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4ST+RXhpZgAATU0AKgAAAAgABQ"
}
----
.request field
|===
|필드명|타입|필수여부|설명
|imageByte|String|Y|base64 인코딩된 이미지 코드
|===
----
{
"chatId": 24,
"chatroomId" : 1,
"message": "/chats/feafsfdsaf.jpg",
"chatType": "IMAGE",
"createdAt": "0초 전",
"userProfileUrl": null,
"userName": "haden",
"userId": 24
}
----

=== 10. 채팅방에서 유저가 들어왔을 때
.STOMP
----
{
"chatroomId" : 1,
"chatType": "ENTER",
"numberOfMembers": 3
}
----

=== 11. 채팅방에서 유저가 나갔을 때
.STOMP
----
{
"chatroomId" : 1,
"chatType": "EXIT",
"numberOfMembers": 3
}
----

=== 12. 채팅방이 폭파되었을 때
호스트가 나가 채팅방이 폭파된 경우

.STOMP
----
{
"chatroomId" : 1,
"chatType": "EXPIRE",
"numberOfMembers": 3
}
----


== 깃헙 API
=== 1. 커밋 정보 가져오기
.request
include::{snippets}/github-controller-test/success_get-commit-info/http-request.adoc[]

.response
include::{snippets}/github-controller-test/success_get-commit-info/http-response.adoc[]

.response field
include::{snippets}/github-controller-test/success_get-commit-info/response-body.adoc[]

=== 2. 커밋 정보 저장하기
.request
include::{snippets}/github-controller-test/success_save-commit-info-from-last-commit-date/http-request.adoc[]

.response
include::{snippets}/github-controller-test/success_save-commit-info-from-last-commit-date/http-response.adoc[]

.response field
include::{snippets}/github-controller-test/success_save-commit-info-from-last-commit-date/response-body.adoc[]

== 뉴스 API
=== 1. 뉴스 상세 내용 가져오기
.request
include::{snippets}/news-controller-test/success-search-news-detail/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|newsId|Number|Y||path variable
|===

.response
include::{snippets}/news-controller-test/success-search-news-detail/http-response.adoc[]

.response field
include::{snippets}/news-controller-test/success-search-news-detail/response-body.adoc[]

=== 2. 뉴스 리스트 가져오기
.request
include::{snippets}/news-controller-test/success-search-news/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명|기본값
|size|Number|N|요청 데이터 개수|10
|keyword|String|N|뉴스 검색 키워드|null
|page|Number|N|요청 데이터 개수|0
|sort|String|N|정렬기준(HIT or DATE)|HIT
|startDate|LocalDate(ISO.DATE)|N||-999999999-01-01
|endDate|LocalDate(ISO.DATE)|N||현재
|===

.response
include::{snippets}/news-controller-test/success-search-news/http-response.adoc[]

.response field
include::{snippets}/news-controller-test/success-search-news/response-body.adoc[]

== 게시물 API
=== 1. 게시글 생성
.request
include::{snippets}/post-controller-test/success_create-post/http-request.adoc[]

.response
include::{snippets}/post-controller-test/success_create-post/http-response.adoc[]

.response field
include::{snippets}/post-controller-test/success_create-post/response-body.adoc[]

=== 2. 게시글 수정
.request
include::{snippets}/post-controller-test/success_update-post/http-request.adoc[]

.response
include::{snippets}/post-controller-test/success_update-post/http-response.adoc[]

.response field
include::{snippets}/post-controller-test/success_update-post/response-body.adoc[]

=== 3. 게시글 목록 조회
.request
include::{snippets}/post-controller-test/success_search-posts/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명|기본값
|keyword|String|N|게시글 검색 키워드|null
|sort|String|N|정렬기준(HIT or LIKE or DATE)|DATE
|order|String|N|정렬기준(ASC or DESC)|DESC
|page|Number|N|요청 페이지 번호|0
|size|Number|N|요청 데이터 개수|10
|===

.response
include::{snippets}/post-controller-test/success_search-posts/http-response.adoc[]

.response field
include::{snippets}/post-controller-test/success_search-posts/response-body.adoc[]

=== 4. 게시글 상세 조회
.request
include::{snippets}/post-controller-test/success_search-post/http-request.adoc[]

.response
include::{snippets}/post-controller-test/success_search-post/http-response.adoc[]

.response field
include::{snippets}/post-controller-test/success_search-post/response-body.adoc[]

=== 5. 게시글 삭제
.request
include::{snippets}/post-controller-test/success_delete-post/http-request.adoc[]

.response
include::{snippets}/post-controller-test/success_delete-post/http-response.adoc[]

.response field
include::{snippets}/post-controller-test/success_delete-post/response-body.adoc[]

=== 6. QNA 답변 작성
.request
include::{snippets}/qna-answer-controller-test/success_create-qna-answer/http-request.adoc[]

.response
include::{snippets}/qna-answer-controller-test/success_create-qna-answer/http-response.adoc[]

.response field
include::{snippets}/qna-answer-controller-test/success_create-qna-answer/response-body.adoc[]

=== 7. QNA 답변 수성
.request
include::{snippets}/qna-answer-controller-test/success_update-qna-answer/http-request.adoc[]

.response
include::{snippets}/qna-answer-controller-test/success_update-qna-answer/http-response.adoc[]

.response field
include::{snippets}/qna-answer-controller-test/success_update-qna-answer/response-body.adoc[]


== 유저 API
=== 1. 유저 팔로우 / 팔로우 취소
.request
include::{snippets}/user-controller-test/success-follow-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|userId|Number|Y|path variable, 대상 유저의 아이디
|===

.response
include::{snippets}/user-controller-test/success-follow-test/http-response.adoc[]


=== 2. 유저의 프로필 조회
.request
include::{snippets}/user-controller-test/success-read-profile-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|userId|Number|Y|path variable, 대상 유저의 아이디
|===

.response
include::{snippets}/user-controller-test/success-read-profile-test/http-response.adoc[]

.response field
include::{snippets}/user-controller-test/success-read-profile-test/response-fields.adoc[]

.error response
|===
|status|ErrorCode|message
|400|NOT_REGISTERED_MEMBER|해당 유저가 없습니다.
|400|CANNOT_FOLLOW_YOURSELF|자기 자신을 팔로우할 수 없습니다."
|===

=== 3. 나의 프로필 조회
.request
include::{snippets}/user-controller-test/success-read-my-profile-test/http-request.adoc[]

.response
include::{snippets}/user-controller-test/success-read-my-profile-test/http-response.adoc[]

.response field
include::{snippets}/user-controller-test/success-read-my-profile-test/response-fields.adoc[]


=== 4. 유저의 팔로우 리스트 조회
.request
include::{snippets}/user-controller-test/success-read-followings-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|userId|Number|Y|path variable, 대상 유저의 아이디
|===

.response
include::{snippets}/user-controller-test/success-read-followings-test/http-response.adoc[]

.response field
include::{snippets}/user-controller-test/success-read-followings-test/response-fields.adoc[]

.error response
|===
|status|ErrorCode|message
|400|NOT_REGISTERED_MEMBER|해당 유저가 없습니다.
|===

=== 5. 유저의 팔로워 리스트 조회
.request
include::{snippets}/user-controller-test/success-read-followers-test/http-request.adoc[]

.request field
|===
|필드명|타입|필수여부|설명
|userId|Number|Y|path variable, 대상 유저의 아이디
|===

.response
include::{snippets}/user-controller-test/success-read-followers-test/http-response.adoc[]

.response field
include::{snippets}/user-controller-test/success-read-followers-test/response-fields.adoc[]

.error response
|===
|status|ErrorCode|message
|400|NOT_REGISTERED_MEMBER|해당 유저가 없습니다.
|===

=== 6. 나의 팔로우 리스트 조회
.request
include::{snippets}/user-controller-test/success-read-my-followings-test/http-request.adoc[]

.response
include::{snippets}/user-controller-test/success-read-my-followings-test/http-response.adoc[]

.response field
include::{snippets}/user-controller-test/success-read-my-followings-test/response-fields.adoc[]


=== 7. 나의 팔로워 리스트 조회
.request
include::{snippets}/user-controller-test/success-read-my-followers-test/http-request.adoc[]

.response
include::{snippets}/user-controller-test/success-read-my-followers-test/http-response.adoc[]

.response field
include::{snippets}/user-controller-test/success-read-my-followers-test/response-fields.adoc[]

